# AWS Basic 

## 확장성과 안정성 높은 서버 만들기
### Amazon EC2
- Elastic Computer Cloud
- AWS 상에서 안정적이며 크기를 조정 가능한 컴퓨팅 파워를 제공하는 웹 서비스 
- 이러한 가상화 서버(Virtual Server)를 인스턴스(instance)라 부르며 필요에 따라 한 개의 인스턴스에서 수천 개의 인스턴스로 손쉽게 컴퓨팅 파워를 확장 가능 

주요 특징 
- 한 개에 수천 개의 인스턴스로 확장 가능
- 모든 공개된 AWS Region에서 사용 가능 
- 필요에 따라 인스턴스의 생성, 시작, 수정, 중단, 삭제 가능 
- Linux/Windows OS에서 사용 가능하며 모든 소프트웨어 설치 가능 
- 사용한 사용량에 대해서만 시간 단위 비용 과금 
- 다양한 비용 모델(온디맨드, 스팟, 예약) 선택 가능 

Amazon EC2 인스턴스 유형
- 인스턴스의 유형은 크게 범용(M 시리즈), 컴퓨팅 최적화(C 시리즈), 스토리지 최적화(I 시리즈, D 시리즈)
, GPU 최적화(G 시리즈), 메모리 최적화(R 시리즈)로 나눌 수 있다. 
- 이용하는 목적에 따라 인스턴스의 유형을 선택함으로써 최적화된 컴퓨팅 파워를 사용할 수 있도록 해준다. 

Amazon EC2 인스턴스 구매 옵션
1. 온디맨드 인스턴스(On-Demand) : 필요할 때 바로 생성해서 사용하는 방식, 인스턴스에 대해 초 단위 비용 지불 
   -   빈번하게 서버를 생성하고 삭제 등을 자주 사용하는 개발 환경에 적합
2. 예약 인스턴스(Reserved) : 1년 또는 3년의 기간에 대한 약정을 통해 온디맨드보다 최대 75% 저렴한 비용을 지불 
   -   장기적으로 변경 없이 1~3년간 사용하는 경우
3. 스팟 인스턴스(Spot) : 경매 방식의 인스턴스로 스펙을 정해 비용을 입찰, 높은 가격을 입력한 사용자에게 인스턴스가 할당됨 
   -   단기적으로 동영상 인코딩과 같이 병렬 컴퓨팅 파워를 사용하는 서비스에 적합 
4. 전용 인스턴스(Dedicated) : 고객 전용의 하드웨어에서 인스턴스 서비스를 제공 
   -   고객의 전용 하드웨어 사용을 통해 보다 보안성 높고 안정적인 클라우드 서비스 사용이 목적에 적합 


### Amazon EBS(Elastic Block Storage)
EC2에 연결되는 Block Level의 스토리지 서비스, 서버에 장착하는 서버용 하드디스크라고 생각하면 됨 

주요특징
- Amazon EBS 볼륨 유형
    1. 범용 SSD : 다양한 트랜잭션 워크로드 처리(API 이름 : gp2)
    2. 프로비저닝된 IOPS : 지연 시간에 민감한 고성능 처리(API 이름 : io1)
       -   IOPS = Input/Output Operations Per Second 
    3. 처리량 최적화 HDD : 자주 액세스하며 처리량 집약적 HDD(API 이름 : st1)
    4. 콜드 HDD : 액세스 빈도 낮은 저비용 HDD(API 이름 : sc1)
    5. 마그네틱 : 빈도가 낮으며 성능 낮은 HDD(API 이름 : standard)

본인의 EC2 구성 목적에 따라 EBS의 유형 중 하나를 선택하면 되는데 보통 EC2 서비스는 범용성 높고 가성비가 뛰어난 범용 SSD를 사용함 

- Amazon EBS 스냅샷 활용 
  -  EBS 볼륨의 데이터를 스냅샷으로 만들어 Amazon S3에 백업 및 보관할 수 있는 기능 
  -  컴퓨터의 하드디스크를 통째로 백업할 수 있는 기능이라고 생각하면 됨 
  -  백업받는 스냅샷으로 다시 EBS 볼륨을 생성하거나 다른 EC2로 연결하여 데이터를 복원하는 작업을 수행 가능 
  - 특징 
     1. EBS 스냅샷은 스냅샷 진행 과정 중에도 EBS나 EC2의 서비스 중단 없이 기존 서비스를 즉시 사용 가능 
     2. EBS 볼륨의 크기 조정에 사용될 수 있음, 보통 Disk의 크기를 늘리는 작업을 수행하는 경우 기존 Disk를 스냅샷으로 백업 후 신규로 장착할 EBS의 크기를 늘려서 볼륨의 사이즈를 늘릴 수 있음 
     3. 스냅샷의 공유 기능을 활용하여 권한이 있는 다른 사용자에게 공유 가능, 공유된 스냅샷으로 새로운 EBS 생성 가능 (기존 스냅샷에 영향 주지 않음)
     4. 다른 리전으로 복사 가능 

- Amazon EBS 성능과 보안성 높이기 
  - 프로비저닝된 IOPS(Provisioned IOPS), EBS 생성시 EBS 유형에서 선택 가능한 옵션으로 EBS의 성능을 높이기 위해 Disk의 IOPS 성능을 지정할 수 있는 기능 
    - EBS-Optimized 인스턴스에서 사용 가능, 보다 높은 I/O 성능을 제공하여 고성능의 서비스 제공에 적합한 EBS 유형 
  - EBS 최적화된 인스턴스, Amazon EBS의 Disk 서비스를 위한 전용 네트워크의 대역폭을 사용하도록 구성하여 Disk 성능을 최적화하는 기능
    - EC2 인스턴스 타입 중 C 시리즈, M 시리즈, R 시리즈에서 추가 비용 없이 사용 가능 
    - Provisioned IOPS를 함께 사용하여 IO의 최대 성능을 끌어내는 것이 가능 
  - EBS 암호화 기능, 암호화 알고리즘 중 하나인 AES-256으로 암호화하여 EBS 내부 데이터를 보호할 수 있는 기능
    - 암호화 키는 AWS의 KMS(Amazon Key Management Service)에서 직접 생성하거나 기본키를 사용 가능 
    - 이렇게 암호화된 EBS 스냅샷은 공유 및 타 AWS 계정에 공유되어도 사용 불가

### Amazon 보안 그룹(Security Group)
보안 그룹은 인스턴스에 대한 인바운드, 아웃바운드의 네트워크 트래픽을 제어하는 가상의 방화벽 역할을 수행 
- 시작할 때 각 인스턴스당 최대 5개의 보안 그룹을 할당 가능
- 이렇게 구성된 보안 그룹은 기존의 On-Premise에서 사용되고 있는 방화벽의 정책과 유사한 기능이다. 
- 단, 보안 그룹은 네트워크 트래픽에 대한 허용(Allow)만 가능하며 차단(Deny)는 설정할 수 없다. 
- 이는 보안 그룹이 EC2 인스턴스 수준에 적용되기 때문에 적용되는 룰이며 차단 기능을 적용하기 위해서는 VPC의 기능 중 하나인 네트워크 ACL(Network ACL)을 통해 서브넷 수준에서 네트워크의 흐름 제어를 할 수 있다. 

주요특징
1. 생성 가능한 보안 그룹의 숫자와 규칙에 제한이 있다.
   - 하나의 VPC당 생성할 수 있는 보안 그룹의 개수는 기본 한도 500개이다.
   - 각 보안 그룹당 추가할 수 있는 규칙의 개수는 50개로 제한되어 있으며 네트워크 인터페이스당 5개의 보안 그룹을 적용 가능 
2. 네트워크 트래픽을 위한 허용 정책은 있으나 차단 정책은 없다.
   - 일반적으로 방화벽(Firewall)에서는 네트워크 흐름 제어하기 위한 정책으러 허용 정책과 차단 정책이 모두 있다.
   - 보안 그룹은 허용 정책은 있으나 차단 정책은 없다. 
   - 차단 정책을 사용하기 위해서는 네트워크 ACL의 기능을 이용해야 한다. 
3. 인바운드 트래픽과 아웃바운드 트래픽을 별도로 제어할 수 있다. 
4. 초기 보안 그룹 설정에는 인바운드 보안 규칙이 없다. 
   - 처음 EC2를 생성하고 다른 EC2와 통신하길 원한다면 해당 EC2와의 통신을 위한 인바운드 규칙을 추가하여야만 EC2간 통신이 가능하다. 

## 무한대로 저장 가능한 스토리지 만들기 
### 스토리지(Storage)
컴퓨터에 데이터를 저장하는 저장소의 역할을 수행하는 부품 
- 컴퓨터의 하드디스크와 동일한 역할을 수행하는 부품이라고 이해하면 됨 
- 스토리지에 서버를 직접 연결할 수 있고 대용량의 데이터를 저장하기 위해 별도의 스토리지용 네트워크를 구성할 수도 있다. 
- 직접 연결하는 방식 : DAS(Direct Attached Storage)
- 빠른 속도의 네트워크로 연결하는 방식 : NAS(Network Attached Storage)와 SAN(Storage Area Network)
  - NAS는 LAN을 연결하여 사용하기 떄문에 비용이 저렴 
  - SAN은 확장이 용이하며 대규모 엔터프라이즈 환경을 구성하기 적합한 고속의 전용 네트워크를 구성하여 빠른 속도의 스토리지 서비스를 제공 
  - 차이점 : SAN은 블록 수준에서 데이터를 저장, NAS는 파일 단위로 데이터에 접속 
  - OS의 입장에서 보면, SAN은 일반적으로 디스크로 나타내며 별도로 구성된 스토리지용 네트워크가 존재 반면 NAS는 OS에 파일 서버로 표시됨 

### 데이터 백업(Data Backup)
데이터가 손상되거나 유실되는 것을 대비하여 데이터를 복사하고 다른 곳에 저장하는 것 

### 스냅샷(SnapShot)
특정 시간에 데이터 저장 장치의 상태를 별도의 파일이나 이미지로 저장하는 기술, 유실된 데이터 복원과 일정 시점의 상태로 데이터를 복원 가능 

### S3(Simple Storage Services)와 Glacier
Amazon S3는 확장성이 뛰어나며 무한대로 저장 가능하고 사용한 만큼 지불하는 인터넷 기반 스토리지 서비스 
- 버킷(Bucket)이라는 리전 내에서 유일한 영역을 생성하고 데이터를 키-값 형식의 객체(Object)로 저장 
- 비용이 매우 저렴하며 간단한 정적 웹 서비스를 위한 웹 서비스 생성 가능 
- 스토리지 기술을 근간으로 하며 파일 단위의 접근만 지원하기 때문에 EBS 서비스를 대체 불가 





참고자료)

[아마존 웹 서비스 AWS Discovey Book_정보문화사(권영환 지음)](http://www.infopub.co.kr/index.asp)